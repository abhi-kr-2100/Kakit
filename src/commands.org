#+TITLE: Commands
#+AUTHOR: Abhishek Kumar
#+EMAIL: abhi.kr.2100@gmail.com
#+LANGUAGE: en
#+PROPERTY: header-args :results silent

While Emacs has many of Kakoune's commands built-in, some commands
still need to be implemented. Such commands are implemented in this
file.

* State Switching Commands

#+begin_src emacs-lisp :tangle kakit/kakit-commands-state-switching.el :mkdirp yes
; -*- lexical-binding: t -*-

(defun kakit-switch-to-normal-mode-local ()
  "Switch to Kakit's Normal state.
Disable any other Kakit minor mode."
  (interactive)
  (kakit--switch-state-local 'normal))

(defun kakit-switch-to-insert-mode-local ()
  "Switch to Kakit's Insert state.
Disable any other Kakit minor mode."
  (interactive)
  (kakit--switch-state-local 'insert))

(defun kakit-insert-after-char ()
  "Move cursor forward one character and switch to insert mode.
If at end of line, do not move."
  (interactive)
  (unless (eolp)
    (forward-char 1))
  (kakit-switch-to-insert-mode-local))

(defun kakit-insert-at-line-end ()
  "Move to the end of a line and switch to insert mode."
  (interactive)
  (end-of-line)
  (kakit-switch-to-insert-mode-local))

(defun kakit-insert-at-line-beginning ()
  "Move to the beginning of a line and switch to insert mode."
  (interactive)
  (beginning-of-line)
  (kakit-switch-to-insert-mode-local))

(defun kakit-open-newline-below ()
  "Insert a newline after the current line and switch to insert mode."
  (interactive)
  (end-of-line)
  (newline-and-indent)
  (kakit-switch-to-insert-mode-local))

(defun kakit-open-newline-above ()
  "Insert a newline before the current line and switch to insert mode."
  (interactive)
  (beginning-of-line)
  (newline)
  (previous-line)
  (indent-according-to-mode)
  (kakit-switch-to-insert-mode-local))

(provide 'kakit-commands-state-switching)
#+end_src

* Movement Commands

#+begin_src emacs-lisp :tangle kakit/kakit-commands-movement.el :mkdirp yes
;; -*- lexical-binding: t -*-

(defun kakit-forward-word-select ()
  "Move forward one word and select the region traversed."
  (interactive)
  (unless (eobp)
    (unless (use-region-p)
      (push-mark (point) t t))
    (forward-word)))

(defun kakit-backward-word-select ()
  "Move backward one word and select the region traversed."
  (interactive)
  (unless (bobp)
    (unless (use-region-p)
      (push-mark (point) t t))
    (backward-word)))

(defun kakit-word-end-select ()
  "Move point to the end of the word at point and select the region traversed."
  (interactive)
  (kakit-forward-word-select))

(provide 'kakit-commands-movement)
#+end_src

* Text Manipulation Commands

#+begin_src emacs-lisp :tangle kakit/kakit-commands-text-manipulation.el :mkdirp yes
;; -*- lexical-binding: t; -*-

(defun kakit-kill-region-or-char ()
  "If region is active, kill it. Otherwise, delete char at point."
  (interactive)
  (if (use-region-p)
      (kill-region (region-beginning) (region-end))
    (delete-char 1)))

(provide 'kakit-commands-text-manipulation)
#+end_src
